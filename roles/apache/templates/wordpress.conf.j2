<VirtualHost {{ ansible_eth0.ipv4.address }}:80>
        ServerName {{ ansible_nodename }}
	ServerAlias {{ MyServerAlias }}

	# Ensure that your log rotation scripts know about these files
	ErrorLog /var/log/httpd/{{ ansible_nodename }}-error_log
	CustomLog /var/log/httpd/{{ ansible_nodename }}-access_log common

        DocumentRoot "/var/www/html"
        <Directory /usr/share/wordpress>
                 AllowOverride Options
                 <IfModule mod_authz_core.c>
                    # Apache 2.4
                    Require local
                 </IfModule>

                  <IfModule !mod_authz_core.c>
                    # Apache 2.2
                    Order Deny,Allow
                    Deny from All
                    Allow from 127.0.0.1
                    Allow from ::1
                 </IfModule>
        </Directory>

        <Directory /var/www/html/wordpress/wp-content/plugins/akismet>
                 <FilesMatch "\.(php|txt)$">
                        Order Deny,Allow
                        Deny from all
                </FilesMatch>
        </Directory>
</VirtualHost>
